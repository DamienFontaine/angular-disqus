(function(i){"use strict";var e=i.module("ngDisqus",[]);e.service("$disqusScript",["$location","$window",function(e,s){function t(i){s.disqus_identifier=i,s.disqus_url=e.absUrl();var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//"+s.disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}function n(i){s.DISQUS.reset({reload:!0,config:function(){this.page.identifier=i,this.page.url=e.absUrl()}})}this.commit=function(e){if(!i.isDefined(s.disqus_shortname))throw Error("No disqus shortname defined");if(!i.isDefined(e))throw Error("No disqus thread id defined");i.isDefined(s.DISQUS)?n(e):t(e)},this.shortname=function(i){return s.disqus_shortname=i||s.disqus_shortname}}]),e.directive("disqus",["$disqusScript",function(e){return{restrict:"EA",replace:!0,template:'<div id="disqus_thread"></div>',link:function(s,t,n){s.$watch(n.disqus,function(s){i.isDefined(s)&&e.commit(s)})}}}])})(angular);